"use strict";angular.module("ecom",["ui.router","angular-stripe"]).config(["$urlRouterProvider","$stateProvider","stripeProvider",function(t,o,e){e.setPublishableKey("pk_test_YCIPURTU6ePqrjERaHH1AHMN"),o.state("home",{url:"/",template:"<home></home>",component:"home"}).state("login",{url:"/login",template:"<login></login>",component:"login"}).state("signup",{url:"/signup",template:"<sign-up></sign-up>",component:"signUp"}).state("products",{url:"/products/:type",template:"<products></products>",component:"products"}).state("shoppingCart",{url:"/shopping-cart",template:"<shopping-cart></shopping-cart>",component:"shoppingCart"}).state("productDetails",{url:"/productsdetails/:id",template:"<product-details></product-details>",component:"productDetails"}).state("user",{url:"/products",templateUrl:"./views/user.html"}).state("payment",{url:"/payment",template:"<payment></payment>",component:"payment"}),t.otherwise("/")}]),angular.module("ecom").service("mainService",["$http","$stateParams",function(t,o){var e="http://localhost:3065",n=this;n.getCustomerInfo=function(){return t({method:"GET",url:e+"/api/me"})},n.getProducts=function(){return t({method:"GET",url:e+"/api/products"})},n.getProductsByType=function(o){return t({method:"GET",url:e+"/api/products/"+o})},n.getProductById=function(){return t({method:"GET",url:e+"/api/product/"+o.id})},n.getProductById2=function(o){return t({method:"GET",url:e+"/api/product/"+o})},n.signUp=function(o,n,r,u,a){return t({method:"POST",data:{firstname:o,lastname:n,email:r,username:u,password:a},url:e+"/api/newuser"})},n.getCart=function(o){return t({method:"GET",url:e+"/api/cart/"+o})},n.addToCart=function(o,n,r){return t({method:"POST",data:{customerId:o,productId:n,quantity:r},url:e+"/api/addtocart"})},n.deleteFromCart=function(o){return t({method:"DELETE",url:e+"/api/delete/"+o})},n.deleteAllFromCart=function(){return t({method:"DELETE",url:e+"/api/deleteall"})},n.updateQuantity=function(o,n){return t({method:"PUT",data:{id:o,quantity:n},url:e+"/api/updatequantity"})},n.login=function(o,n){return t({method:"POST",data:{username:o,password:n},url:e+"/api/login"})},n.logout=function(){return t({method:"GET",url:e+"/api/logout"})},n.checkLogin=function(){return t({method:"GET",url:e+"/api/checklogin"})}}]),angular.module("ecom").factory("modelFactory",["$http",function(t){}]),angular.module("ecom").component("home",{templateUrl:"./views/home.html",controller:["mainService",function(t){var o=this;o.product3=[],o.product4=[],o.subscribe=function(){alert("Thank you for subscribing "+o.name)},t.getCustomerInfo().then(function(t){o.customer=t.data}),t.getProductById2(16).then(function(e){t.getProductById2(5).then(function(n){t.getProductById2(29).then(function(r){t.getProductById2(2).then(function(u){t.getProductById2(26).then(function(a){t.getProductById2(23).then(function(t){o.product16=e.data[0],o.product3.push(o.product16),o.product5=n.data[0],o.product3.push(o.product5),o.product29=r.data[0],o.product3.push(o.product29),o.product2=u.data[0],o.product4.push(o.product2),o.product26=a.data[0],o.product4.push(o.product26),o.product23=t.data[0],o.product4.push(o.product23)})})})})})}),o.addToCart=function(e){t.addToCart(o.customer.id,e,1).then(function(t){})}}]}),angular.module("ecom").component("login",{templateUrl:"./views/login.html",require:{main:"^mainComp"},controller:["mainService","$timeout","$state",function(t,o,e){var n=this;n.login=function(){t.login(n.username,n.password).then(function(o){console.log(o),t.deleteAllFromCart().then(function(t){}),t.getCustomerInfo().then(function(t){n.name=t.data.firstname,n.check()})})},n.$onInit=function(){n.check=function(){n.main.checkLogin()}},n.show=!0,n.goHome=function(){n.show=!1,n.number=3,o(function(){n.number=2,o(function(){n.number=1,o(function(){},1e3)},2e3),e.go("home")},3e3)}}]}),angular.module("ecom").component("mainComp",{templateUrl:"./views/mainComp.html",controllerAs:"main",controller:["$http","mainService","$state",function(t,o,e){var n=this;n.checkLogin=function(){o.checkLogin().then(function(t){console.log(t),t.data.user&&(n.user=!0)})},n.checkLogin(),n.logged=function(){if(n.user)return!0},n.logout=function(){o.logout().then(function(t){n.data=t.data,n.user=!1,e.go("home")})}}]}),angular.module("ecom").component("payment",{templateUrl:"./views/payment.html",controller:["stripe","$http",function(t,o){var e=this;e.payment={},e.charge=function(){return t.card.createToken(e.payment.card).then(function(t){console.log("token created for card ending in ",t.card.last4);var n=angular.copy(e.payment);return n.card=void 0,n.token=t.id,o.post("http://localhost:3065/payments",n)}).then(function(t){console.log("successfully submitted payment for $",t.amount)}).catch(function(t){t.type&&/^Stripe/.test(t.type)?console.log("Stripe error: ",t.message):console.log("Other error occurred, possibly with your API",t.message)})}}]}),angular.module("ecom").component("productDetails",{templateUrl:"./views/product-details.html",controller:["mainService","$stateParams",function(t,o){var e=this;e.getProducts=function(){t.getProducts().then(function(t){e.products=t.data,e.product1=o.id})},e.getProducts(),t.getProductById().then(function(t){e.product=t.data[0]}),t.getCustomerInfo().then(function(t){e.customer=t.data}),e.addToCart=function(o){t.addToCart(e.customer.id,o,1).then(function(t){})}}]}),angular.module("ecom").component("products",{templateUrl:"./views/products.html",controller:["mainService","$stateParams",function(t,o){var e=this;t.getCustomerInfo().then(function(t){e.customer=t.data}),e.getProductsByType=function(){t.getProductsByType(o.type).then(function(t){e.products=t.data})},e.getProductsByType(),e.addToCart=function(o){t.addToCart(e.customer.id,o,1).then(function(t){})}}]}),angular.module("ecom").component("shoppingCart",{templateUrl:"./views/shopping-cart.html",require:{main:"^mainComp"},controller:["mainService",function(t){var o=this;o.showCart=!1,o.showBox2=!0,o.show2=!1,o.$onInit=function(){o.show=o.main.logged(),o.show?(console.log(o.show),o.showBox=!0,o.show2=!0):o.showBox=!1},o.message1="You have no items in your cart",o.message2="Please log in to add items to your cart",t.getCustomerInfo().then(function(e){o.customer=e.data,t.getCart(o.customer.id).then(function(t){if(t.data.length>0){o.showCart=!0,o.show2=!1,o.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),o.cartTotal=0,o.quantityTotal=0;for(var e=0;e<o.products.length;e++)o.cartTotal+=o.products[e].total,o.quantityTotal+=o.products[e].quantity;o.qTotal=1.99*o.quantityTotal,o.gTotal=o.cartTotal+o.qTotal}}),o.updateTotal=function(e,n){t.updateQuantity(e,n).then(function(e){t.getCart(o.customer.id).then(function(t){if(t.data.length>0){o.showCart=!0,o.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),o.cartTotal=0,o.quantityTotal=0;for(var e=0;e<o.products.length;e++)o.cartTotal+=o.products[e].total,o.quantityTotal+=o.products[e].quantity;o.qTotal=1.99*o.quantityTotal,o.gTotal=o.cartTotal+o.qTotal}})})},o.deleteFromCart=function(e){t.deleteFromCart(e).then(function(e){t.getCart(o.customer.id).then(function(t){t.data.length>0?(o.showCart=!0,o.products=t.data):0===t.data.length?(o.showCart=!1,o.show2=!0):o.showCart=!1})})}})}]}),angular.module("ecom").component("signUp",{templateUrl:"./views/signUp.html",controller:["mainService","$timeout","$state",function(t,o,e){var n=this;n.addNewUser=function(){t.signUp(n.firstname,n.lastname,n.email,n.username,n.password).then(function(t){})},n.show=!0,n.goHome=function(){n.show=!1,n.number=3,o(function(){n.number=2,o(function(){n.number=1,o(function(){},1e3)},2e3),e.go("home")},3e3)}}]}),angular.module("ecom").component("timeOut",{templateUrl:"./views/user.html",controller:["$timeout","$state",function(t,o){var e=this;e.count=3,t(function(){t(function(){t(function(){e.count=1},1e3),e.count=2},2e3),o.go("home")},3e3)}]}),angular.module("ecom").directive("buttonD",function(){return{restrict:"A",link:function(t,o,e){o.on("click",function(){o.html("ADDED TO CART")})}}}),angular.module("ecom").directive("changeText",["mainService",function(t){}]),angular.module("ecom").directive("countDown",["$timeout",function(t){return{restrict:"A",template:"<div>{{number}}</div>",link:function(o,e,n){o.number=3,t(function(){o.number=2,t(function(){o.number=1,t(function(){},1e3)},1e3)},1e3)}}}]),angular.module("ecom").directive("login2",["mainService",function(t){}]),angular.module("ecom").directive("shipping",function(){return{restrict:"E",template:"<div>Shipping is <br/> $1.99 per item</div>"}}),angular.module("ecom").controller("loginCtrl",["mainService",function(t){}]),angular.module("ecom").controller("mainCtrl",["$scope","$http",function(t,o){}]);
//# sourceMappingURL=bundle.js.map
