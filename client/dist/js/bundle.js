"use strict";angular.module("ecom",["ui.router","angular-stripe","angular-parallax"]).config(["$urlRouterProvider","$stateProvider","stripeProvider",function(t,o,e){e.setPublishableKey("pk_test_YCIPURTU6ePqrjERaHH1AHMN"),o.state("home",{url:"/",template:"<home></home>",component:"home"}).state("login",{url:"/login",template:"<login></login>",component:"login"}).state("signup",{url:"/signup",template:"<sign-up></sign-up>",component:"signUp"}).state("products",{url:"/products/:type",template:"<products></products>",component:"products"}).state("shoppingCart",{url:"/shopping-cart",template:"<shopping-cart></shopping-cart>",component:"shoppingCart"}).state("productDetails",{url:"/productsdetails/:id",template:"<product-details></product-details>",component:"productDetails"}).state("user",{url:"/products",templateUrl:"./views/user.html"}).state("payment",{url:"/payment",template:"<payment></payment>",component:"payment"}),t.otherwise("/")}]),angular.module("ecom").component("home",{templateUrl:"./views/home.html",controller:["mainService",function(t){var o=this;o.product3=[],o.product4=[],o.subscribe=function(){alert("Thank you for subscribing "+o.name)},t.getCustomerInfo().then(function(t){o.customer=t.data}),t.getProductById2(16).then(function(e){t.getProductById2(5).then(function(n){t.getProductById2(29).then(function(r){t.getProductById2(2).then(function(u){t.getProductById2(26).then(function(a){t.getProductById2(23).then(function(t){o.product16=e.data[0],o.product3.push(o.product16),o.product5=n.data[0],o.product3.push(o.product5),o.product29=r.data[0],o.product3.push(o.product29),o.product2=u.data[0],o.product4.push(o.product2),o.product26=a.data[0],o.product4.push(o.product26),o.product23=t.data[0],o.product4.push(o.product23)})})})})})}),o.addToCart=function(e){t.addToCart(o.customer.id,e,1).then(function(t){})}}]}),angular.module("ecom").component("login",{templateUrl:"./views/login.html",require:{main:"^mainComp"},controller:["mainService","$timeout","$state",function(t,o,e){var n=this;n.login=function(){t.login(n.username,n.password).then(function(o){console.log(o),t.deleteAllFromCart().then(function(t){}),t.getCustomerInfo().then(function(t){n.name=t.data.firstname,n.check()})})},n.$onInit=function(){n.check=function(){n.main.checkLogin()}},n.show=!0,n.goHome=function(){n.show=!1,n.number=3,o(function(){n.number=2,o(function(){n.number=1,o(function(){},1e3)},2e3),e.go("home")},3e3)}}]}),angular.module("ecom").component("mainComp",{templateUrl:"./views/mainComp.html",controllerAs:"main",controller:["$http","mainService","$state",function(t,o,e){var n=this;n.checkLogin=function(){o.checkLogin().then(function(t){t.data.user&&(n.user=!0)})},n.checkLogin(),n.logged=function(){if(n.user)return!0},n.logout=function(){o.logout().then(function(t){n.data=t.data,n.user=!1,e.go("home")})}}]}),angular.module("ecom").component("payment",{require:{parent:"^mainComp"},templateUrl:"./views/payment.html",controller:["stripe","$http","mainService","modelFactory","$state","$timeout",function(t,o,e,n,r,u){var a=this;a.payment={},a.amount=n.getTotal(),a.showP=!0,a.show=function(){a.showP=!1},a.charge=function(){return t.card.createToken(a.payment.card).then(function(t){console.log("token created for card ending in ",t.card.last4);var e=angular.copy(a.payment);return e.card=void 0,e.token=t.id,e.amount=Number(100*a.amount),o.post("http://localhost:3065/api/payments",e)}).then(function(t){console.log("successfully submitted payment for $",t.amount)}).catch(function(t){t.type&&/^Stripe/.test(t.type)?console.log("Stripe error: ",t.message):console.log("Other error occurred, possibly with your API",t.message)})},a.goHome=function(){u(function(){u(function(){u(function(){u(function(){u(function(){u(function(){u(function(){u(function(){u(function(){u(function(){r.go("home")},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)}}]}),angular.module("ecom").component("productDetails",{templateUrl:"./views/product-details.html",controller:["mainService","$stateParams",function(t,o){var e=this;e.getProducts=function(){t.getProducts().then(function(t){e.products=t.data,e.product1=o.id})},e.getProducts(),t.getProductById().then(function(t){e.product=t.data[0]}),t.getCustomerInfo().then(function(t){e.customer=t.data}),e.addToCart=function(o){t.addToCart(e.customer.id,o,1).then(function(t){})}}]}),angular.module("ecom").component("products",{templateUrl:"./views/products.html",controller:["mainService","$stateParams",function(t,o){var e=this;t.getCustomerInfo().then(function(t){e.customer=t.data}),e.getProductsByType=function(){t.getProductsByType(o.type).then(function(t){e.products=t.data})},e.getProductsByType(),e.addToCart=function(o){t.addToCart(e.customer.id,o,1).then(function(t){})}}]}),angular.module("ecom").component("shoppingCart",{templateUrl:"./views/shopping-cart.html",require:{main:"^mainComp"},controller:["mainService","modelFactory",function(t,o){var e=this;e.showCart=!1,e.showBox2=!0,e.show2=!1,e.$onInit=function(){e.show=e.main.logged(),e.show?(e.showBox=!0,e.show2=!0):e.showBox=!1},e.displayTotal=function(){o.displayTotal(e.gTotal)},e.message1="You have no items in your cart",e.message2="Please log in to add items to your cart",t.getCustomerInfo().then(function(o){e.customer=o.data,t.getCart(e.customer.id).then(function(t){if(t.data.length>0){e.showCart=!0,e.show2=!1,e.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),e.cartTotal=0,e.quantityTotal=0;for(var o=0;o<e.products.length;o++)e.cartTotal+=e.products[o].total,e.quantityTotal+=e.products[o].quantity;e.qTotal=1.99*e.quantityTotal,e.gTotal=e.cartTotal+e.qTotal,e.displayTotal()}}),e.updateTotal=function(o,n){t.updateQuantity(o,n).then(function(o){t.getCart(e.customer.id).then(function(t){if(t.data.length>0){e.showCart=!0,e.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),e.cartTotal=0,e.quantityTotal=0;for(var o=0;o<e.products.length;o++)e.cartTotal+=e.products[o].total,e.quantityTotal+=e.products[o].quantity;e.qTotal=1.99*e.quantityTotal,e.gTotal=e.cartTotal+e.qTotal}})})},e.deleteFromCart=function(o){t.deleteFromCart(o).then(function(o){t.getCart(e.customer.id).then(function(t){t.data.length>0?(e.showCart=!0,e.products=t.data):0===t.data.length?(e.showCart=!1,e.show2=!0):e.showCart=!1})})}})}]}),angular.module("ecom").component("signUp",{templateUrl:"./views/signUp.html",controller:["mainService","$timeout","$state",function(t,o,e){var n=this;n.addNewUser=function(){t.signUp(n.firstname,n.lastname,n.email,n.username,n.password).then(function(t){})},n.show=!0,n.goHome=function(){n.show=!1,n.number=3,o(function(){n.number=2,o(function(){n.number=1,o(function(){},1e3)},2e3),e.go("home")},3e3)}}]}),angular.module("ecom").component("timeOut",{templateUrl:"./views/user.html",controller:["$timeout","$state",function(t,o){var e=this;e.count=3,t(function(){t(function(){t(function(){e.count=1},1e3),e.count=2},2e3),o.go("home")},3e3)}]}),angular.module("ecom").controller("loginCtrl",["mainService",function(t){}]),angular.module("ecom").controller("mainCtrl",["$scope","$http",function(t,o){}]),angular.module("ecom").directive("backGround",["$timeout","$interval",function(t,o){return{restrict:"A",link:function(t,e,n){e.css({"background-image":"https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?w=1260&h=750&auto=compress&cs=tinysrgb"});var r=["https://s-media-cache-ak0.pinimg.com/originals/a9/e7/47/a9e7475a3a0f0af6d06685e8ec544fd3.jpg","http://carriagehousemusic.com/wp-content/uploads/2013/08/ssl-long-live-rm-BW-e1400469994189.jpg","http://aespeakers.com/wp-content/uploads/2015/11/Phat-Planet-Recording-Studios-3.jpg","http://www.mansionaudio.com/wp-content/uploads/2009/10/DSCN1270.JPG","https://www.gearslutz.com/board/attachments/photo-diaries-recording-studio-construction-projects/177790d1276237018-ssl-xl-9000k-install-img_1004a.jpg","https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?w=1260&h=750&auto=compress&cs=tinysrgb"],u=-1;o(function(){console.log(u),++u===r.length-1&&(u=0);var t="url("+r[u]+")";e.css({"background-image":t,"background-size":"cover","background-position":"center","background-attachment":"fixed","background-repeat":"no-repeat",height:"100vw",width:"100vw",transition:"3s","-webkit-backface-visibility":"hidden"})},5500)}}}]),angular.module("ecom").directive("buttonD",function(){return{restrict:"A",link:function(t,o,e){o.on("click",function(){o.html("ADDED TO CART")})}}}),angular.module("ecom").directive("countDown",["$timeout",function(t){return{restrict:"A",template:"<div>{{number}}</div>",link:function(o,e,n){o.number=3,t(function(){o.number=2,t(function(){o.number=1,t(function(){},1e3)},1e3)},1e3)}}}]),angular.module("ecom").directive("countDown2",["$timeout",function(t){return{restrict:"A",template:"<div>{{number}}</div>",link:function(o,e,n){o.number=10,t(function(){o.number=9,t(function(){o.number=8,t(function(){o.number=7,t(function(){o.number=6,t(function(){o.number=5,t(function(){o.number=4,t(function(){o.number=3,t(function(){o.number=2,t(function(){o.number=1},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)}}}]),angular.module("ecom").directive("fade",function(){return{restrict:"A",link:function(t,o,e){o.mouseleave(function(){o.css({transition:".750s","box-shadow":"0 0 0 0 rgba(0,0,0,0)",opacity:"0"})}),o.mouseenter(function(){o.css({transition:".750s","box-shadow":"0 2px 5px 0 rgba(0,0,0,.16)",opacity:"1"})})}}}),angular.module("ecom").directive("shipping",function(){return{restrict:"E",template:"<div>Shipping is <br/> $1.99 per item</div>"}}),angular.module("ecom").service("mainService",["$http","$stateParams",function(t,o){var e="http://localhost:3065",n=this;n.getCustomerInfo=function(){return t({method:"GET",url:e+"/api/me"})},n.getProducts=function(){return t({method:"GET",url:e+"/api/products"})},n.getProductsByType=function(o){return t({method:"GET",url:e+"/api/products/"+o})},n.getProductById=function(){return t({method:"GET",url:e+"/api/product/"+o.id})},n.getProductById2=function(o){return t({method:"GET",url:e+"/api/product/"+o})},n.signUp=function(o,n,r,u,a){return t({method:"POST",data:{firstname:o,lastname:n,email:r,username:u,password:a},url:e+"/api/newuser"})},n.getCart=function(o){return t({method:"GET",url:e+"/api/cart/"+o})},n.addToCart=function(o,n,r){return t({method:"POST",data:{customerId:o,productId:n,quantity:r},url:e+"/api/addtocart"})},n.deleteFromCart=function(o){return t({method:"DELETE",url:e+"/api/delete/"+o})},n.deleteAllFromCart=function(){return t({method:"DELETE",url:e+"/api/deleteall"})},n.updateQuantity=function(o,n){return t({method:"PUT",data:{id:o,quantity:n},url:e+"/api/updatequantity"})},n.login=function(o,n){return t({method:"POST",data:{username:o,password:n},url:e+"/api/login"})},n.logout=function(){return t({method:"GET",url:e+"/api/logout"})},n.checkLogin=function(){return t({method:"GET",url:e+"/api/checklogin"})}}]),angular.module("ecom").factory("modelFactory",function(){var t=[];return{displayTotal:function(o){t.push(o)},getTotal:function(){for(;t.length>1;)t.shift();return t[0]}}});
//# sourceMappingURL=bundle.js.map
