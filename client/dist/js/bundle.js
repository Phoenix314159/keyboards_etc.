"use strict";angular.module("ecom",["ui.router","angular-stripe","angular-parallax"]).config(["$urlRouterProvider","$stateProvider","stripeProvider",function(t,e,n){n.setPublishableKey("pk_test_YCIPURTU6ePqrjERaHH1AHMN"),e.state("home",{url:"/",template:"<home></home>",component:"home"}).state("login",{url:"/login",template:"<login></login>",component:"login"}).state("signup",{url:"/signup",template:"<sign-up></sign-up>",component:"signUp"}).state("products",{url:"/products/:type",template:"<products></products>",component:"products"}).state("shoppingCart",{url:"/shopping-cart",template:"<shopping-cart></shopping-cart>",component:"shoppingCart"}).state("productDetails",{url:"/productsdetails/:id",template:"<product-details></product-details>",component:"productDetails"}).state("user",{url:"/products",templateUrl:"./views/user.html"}).state("payment",{url:"/payment",template:"<payment></payment>",component:"payment"}),t.otherwise("/")}]),angular.module("ecom").component("home",{templateUrl:"./views/home.html",controller:["mainService",function(t){var e=this;e.product3=[],e.product4=[],e.subscribe=function(){alert("Thank you for subscribing "+e.name)},t.getCustomerInfo().then(function(t){e.customer=t.data}),t.getProductById2(16).then(function(n){t.getProductById2(5).then(function(o){t.getProductById2(29).then(function(a){t.getProductById2(2).then(function(r){t.getProductById2(26).then(function(u){t.getProductById2(23).then(function(t){e.product16=n.data[0],e.product3.push(e.product16),e.product5=o.data[0],e.product3.push(e.product5),e.product29=a.data[0],e.product3.push(e.product29),e.product2=r.data[0],e.product4.push(e.product2),e.product26=u.data[0],e.product4.push(e.product26),e.product23=t.data[0],e.product4.push(e.product23)})})})})})}),e.addToCart=function(n){t.addToCart(e.customer.id,n,1).then(function(t){})}}]}),angular.module("ecom").component("login",{templateUrl:"./views/login.html",require:{main:"^mainComp"},controller:["mainService","$timeout","$state",function(t,e,n){var o=this;o.login=function(){t.login(o.username,o.password).then(function(e){console.log(e),t.deleteAllFromCart().then(function(t){}),t.getCustomerInfo().then(function(t){o.name=t.data.firstname,o.check()})})},o.$onInit=function(){o.check=function(){o.main.checkLogin()}},o.show=!0,o.goHome=function(){o.show=!1,o.number=3,e(function(){o.number=2,e(function(){o.number=1,e(function(){},1e3)},2e3),n.go("home")},3e3)}}]}),angular.module("ecom").component("mainComp",{templateUrl:"./views/mainComp.html",controllerAs:"main",controller:["$http","mainService","$state",function(t,e,n){var o=this;o.checkLogin=function(){e.checkLogin().then(function(t){t.data.user&&(o.user=!0)})},o.checkLogin(),o.logged=function(){if(o.user)return!0},o.logout=function(){e.logout().then(function(t){o.data=t.data,o.user=!1,n.go("home")})}}]}),angular.module("ecom").component("payment",{require:{parent:"^mainComp"},templateUrl:"./views/payment.html",controller:["stripe","$http","mainService","modelFactory","$state","$timeout",function(t,e,n,o,a,r){var u=this;u.payment={},u.amount=o.getTotal(),u.showP=!0,u.show=function(){u.showP=!1},u.charge=function(){return t.card.createToken(u.payment.card).then(function(t){console.log("token created for card ending in ",t.card.last4);var n=angular.copy(u.payment);return n.card=void 0,n.token=t.id,n.amount=Number(100*u.amount),e.post("http://localhost:3065/api/payments",n)}).then(function(t){console.log("successfully submitted payment for $",t.amount)}).catch(function(t){t.type&&/^Stripe/.test(t.type)?console.log("Stripe error: ",t.message):console.log("Other error occurred, possibly with your API",t.message)})},u.goHome=function(){r(function(){r(function(){r(function(){r(function(){r(function(){r(function(){r(function(){r(function(){r(function(){r(function(){a.go("home")},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)}}]}),angular.module("ecom").component("productDetails",{templateUrl:"./views/product-details.html",controller:["mainService","$stateParams",function(t,e){var n=this;n.getProducts=function(){t.getProducts().then(function(t){n.products=t.data,n.product1=e.id})},n.getProducts(),t.getProductById().then(function(t){n.product=t.data[0]}),t.getCustomerInfo().then(function(t){n.customer=t.data}),n.addToCart=function(e){t.addToCart(n.customer.id,e,1).then(function(t){})}}]}),angular.module("ecom").component("products",{templateUrl:"./views/products.html",controller:["mainService","$stateParams",function(t,e){var n=this;t.getCustomerInfo().then(function(t){n.customer=t.data}),n.getProductsByType=function(){t.getProductsByType(e.type).then(function(t){n.products=t.data})},n.getProductsByType(),n.addToCart=function(e){t.addToCart(n.customer.id,e,1).then(function(t){})}}]}),angular.module("ecom").component("shoppingCart",{templateUrl:"./views/shopping-cart.html",require:{main:"^mainComp"},controller:["mainService","modelFactory",function(t,e){var n=this;n.showCart=!1,n.showBox2=!0,n.show2=!1,n.$onInit=function(){n.show=n.main.logged(),n.show?(n.showBox=!0,n.show2=!0):n.showBox=!1},n.displayTotal=function(){e.displayTotal(n.gTotal)},n.message1="You have no items in your cart",n.message2="Please log in to add items to your cart",t.getCustomerInfo().then(function(e){n.customer=e.data,t.getCart(n.customer.id).then(function(t){if(t.data.length>0){n.showCart=!0,n.show2=!1,n.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),n.cartTotal=0,n.quantityTotal=0;for(var e=0;e<n.products.length;e++)n.cartTotal+=n.products[e].total,n.quantityTotal+=n.products[e].quantity;n.qTotal=1.99*n.quantityTotal,n.gTotal=n.cartTotal+n.qTotal,n.displayTotal()}}),n.updateTotal=function(e,o){t.updateQuantity(e,o).then(function(e){t.getCart(n.customer.id).then(function(t){if(t.data.length>0){n.showCart=!0,n.products=t.data.map(function(t){return t.total=t.price*t.quantity,t}),n.cartTotal=0,n.quantityTotal=0;for(var e=0;e<n.products.length;e++)n.cartTotal+=n.products[e].total,n.quantityTotal+=n.products[e].quantity;n.qTotal=1.99*n.quantityTotal,n.gTotal=n.cartTotal+n.qTotal}})})},n.deleteFromCart=function(e){t.deleteFromCart(e).then(function(e){t.getCart(n.customer.id).then(function(t){t.data.length>0?(n.showCart=!0,n.products=t.data):0===t.data.length?(n.showCart=!1,n.show2=!0):n.showCart=!1})})}})}]}),angular.module("ecom").component("signUp",{templateUrl:"./views/signUp.html",controller:["mainService","$timeout","$state",function(t,e,n){var o=this;o.addNewUser=function(){t.signUp(o.firstname,o.lastname,o.email,o.username,o.password).then(function(t){})},o.show=!0,o.goHome=function(){o.show=!1,o.number=3,e(function(){o.number=2,e(function(){o.number=1,e(function(){},1e3)},2e3),n.go("home")},3e3)}}]}),angular.module("ecom").component("timeOut",{templateUrl:"./views/user.html",controller:["$timeout","$state",function(t,e){var n=this;n.count=3,t(function(){t(function(){t(function(){n.count=1},1e3),n.count=2},2e3),e.go("home")},3e3)}]}),angular.module("ecom").controller("loginCtrl",["mainService",function(t){}]),angular.module("ecom").controller("mainCtrl",["$scope","$http",function(t,e){}]),angular.module("angular-parallax",[]).directive("parallax",["$window",function(t){return{restrict:"A",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@",parallaxHorizontalOffset:"@"},link:function(e,n,o){var a=function(){e.parallaxHorizontalOffset||(e.parallaxHorizontalOffset="0");var o=t.pageYOffset*(e.parallaxRatio?e.parallaxRatio:1.1);if(o<=t.innerHeight){var a=o<e.parallaxVerticalOffset?e.parallaxVerticalOffset:o,r=-1===e.parallaxHorizontalOffset.indexOf("%")?e.parallaxHorizontalOffset+"px":e.parallaxHorizontalOffset;n.css("transform","translate("+r+", "+a+"px)")}};a(),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]).directive("parallaxBackground",["$window",function(t){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@"},link:function(e,n,o){var a=function(){var o=(n.prop("offsetTop")-t.pageYOffset)*(e.parallaxRatio?e.parallaxRatio:1.1)-(e.parallaxVerticalOffset||0);n.css("background-position","50% "+o+"px")};angular.element(t).bind("load",function(t){a(),e.$apply()}),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]),angular.module("ecom").directive("backGround",["$timeout","$interval",function(t,e){return{restrict:"A",link:function(t,n,o){n.css({"background-image":"./images/image1.jpeg"});var a=["./js2/images/image2.jpg","./js2/images/image3.jpg","./js2/images/image4.jpg","./js2/images/image5.JPG","./js2/images/image6.jpg","./js2/images/image7.jpg","./js2/images/image8.jpg","./js2/images/image9.jpg","./js2/images/image10.jpg","./js2/images/image1.jpeg"],r=-1;e(function(){++r===a.length-1&&(r=0);var t="url("+a[r]+")";n.css({"background-image":t,"background-size":"cover","background-position":"center","background-attachment":"fixed","background-repeat":"no-repeat",height:"100%",width:"100%",transition:".7s","-webkit-backface-visibility":"hidden","-webkit-transform":"translateZ(0) scale(1.0, 1.0)"})},5500)}}}]),angular.module("ecom").directive("buttonD",function(){return{restrict:"A",link:function(t,e,n){e.on("click",function(){e.html("ADDED TO CART")})}}}),angular.module("ecom").directive("countDown",["$timeout",function(t){return{restrict:"A",template:"<div>{{number}}</div>",link:function(e,n,o){e.number=3,t(function(){e.number=2,t(function(){e.number=1,t(function(){},1e3)},1e3)},1e3)}}}]),angular.module("ecom").directive("countDown2",["$timeout",function(t){return{restrict:"A",template:"<div>{{number}}</div>",link:function(e,n,o){e.number=10,t(function(){e.number=9,t(function(){e.number=8,t(function(){e.number=7,t(function(){e.number=6,t(function(){e.number=5,t(function(){e.number=4,t(function(){e.number=3,t(function(){e.number=2,t(function(){e.number=1},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)},1e3)}}}]),angular.module("ecom").directive("fade",function(){return{restrict:"A",link:function(t,e,n){e.mouseleave(function(){e.css({transition:".750s","box-shadow":"0 0 0 0 rgba(0,0,0,0)",opacity:"0"})}),e.mouseenter(function(){e.css({transition:".750s","box-shadow":"0 2px 5px 0 rgba(0,0,0,.16)",opacity:"1"})})}}}),angular.module("ecom").directive("shipping",function(){return{restrict:"E",template:"<div>Shipping is <br/> $1.99 per item</div>"}}),angular.module("ecom").service("mainService",["$http","$stateParams",function(t,e){var n="http://localhost:3065",o=this;o.getCustomerInfo=function(){return t({method:"GET",url:n+"/api/me"})},o.getProducts=function(){return t({method:"GET",url:n+"/api/products"})},o.getProductsByType=function(e){return t({method:"GET",url:n+"/api/products/"+e})},o.getProductById=function(){return t({method:"GET",url:n+"/api/product/"+e.id})},o.getProductById2=function(e){return t({method:"GET",url:n+"/api/product/"+e})},o.signUp=function(e,o,a,r,u){return t({method:"POST",data:{firstname:e,lastname:o,email:a,username:r,password:u},url:n+"/api/newuser"})},o.getCart=function(e){return t({method:"GET",url:n+"/api/cart/"+e})},o.addToCart=function(e,o,a){return t({method:"POST",data:{customerId:e,productId:o,quantity:a},url:n+"/api/addtocart"})},o.deleteFromCart=function(e){return t({method:"DELETE",url:n+"/api/delete/"+e})},o.deleteAllFromCart=function(){return t({method:"DELETE",url:n+"/api/deleteall"})},o.updateQuantity=function(e,o){return t({method:"PUT",data:{id:e,quantity:o},url:n+"/api/updatequantity"})},o.login=function(e,o){return t({method:"POST",data:{username:e,password:o},url:n+"/api/login"})},o.logout=function(){return t({method:"GET",url:n+"/api/logout"})},o.checkLogin=function(){return t({method:"GET",url:n+"/api/checklogin"})}}]),angular.module("ecom").factory("modelFactory",function(){var t=[];return{displayTotal:function(e){t.push(e)},getTotal:function(){for(;t.length>1;)t.shift();return t[0]}}});
//# sourceMappingURL=bundle.js.map
